{"mappings":"stBAAA,IAAAA,EAAAC,EAAA,sBAEO,MAAMC,EACXC,WAEAC,YAEAC,mBAEAC,gBAEAC,aAEAC,oBAEAC,iBAEAC,cAEAC,gBAEAC,eAEAC,aAEAC,YAAYX,GACVY,KAAKZ,WAAaA,EAClBY,KAAKP,oBAAsB,EAC3BO,KAAKV,mBAAqB,EAC1BU,KAAKL,cAAgB,GACrBK,KAAKH,eAAiB,GACtBG,KAAKC,YAGPA,YACED,KAAKL,cAAgBO,EAAAC,WAAWH,KAAKZ,YAAYgB,aACjDJ,KAAKH,eAAiBK,EAAAC,WAAWH,KAAKZ,YAAYS,eAClDG,KAAKX,YAAca,EAAAC,WAAWH,KAAKZ,YAAYC,YAC/CW,KAAKR,aAAeU,EAAAC,WAAWH,KAAKZ,YAAYI,aAChDQ,KAAKN,iBAAmBQ,EAAAC,WAAWH,KAAKZ,YAAYM,iBACpDM,KAAKT,gBAAkBW,EAAAC,WAAWH,KAAKZ,YAAYG,gBAGrDc,SACE,IAAIC,EAASC,SAASC,cAAc,OACpC,IAAK,IAAIC,EAAM,EAAGA,GAAO,GAAIA,GAAO,EAAG,CAErC,IAAIC,EAAUV,KAAKW,QACfC,EAAWL,SAASC,cAAc,OACtCI,EAASC,aAAa,QAAS,GAAGH,EAAQI,wBAC1C,IAAIC,EAAYR,SAASC,cAAc,OACvCO,EAAUF,aAAa,MAAO,GAAGH,EAAQM,KAAKC,aAC9CF,EAAUF,aAAa,QAAS,GAAGH,EAAQI,YAC3CF,EAASM,YAAYH,GACrBT,EAAOY,YAAYN,GAErBZ,KAAKF,aAAeQ,EACJC,SAASY,cAAc,YAC7BC,mBAAmBd,EAAOe,YACpCC,YAAYC,UAAY,SAASvB,KAAKP,yBAAyBO,KAAKV,qBAEtEkC,UAAUR,EAAMF,GAEG,MAAdE,EAAKS,MAAgB,mBAAqBX,EAC3Cd,KAAKP,oBAAsB,EAEP,MAAduB,EAAKS,MAAgB,mBAAqBX,IAChDd,KAAKP,oBAAsB,EAC3BO,KAAKV,mBAAqB,IAEzBU,KAAKP,oBAAsBO,KAAKR,cAAgBQ,KAAKV,mBAAqBU,KAAKX,cAChFqC,MAAM,0FAGVf,QACE,IAAIK,EACAF,EAoCJ,OAnCAd,KAAKP,sBACLO,KAAKV,qBAGFU,KAAKV,qBAAuBU,KAAKX,aAElCsC,QAAQC,IAAI,yBACZZ,EAAOhB,KAAK6B,SAAS7B,KAAKT,iBAC1BuB,EAAWd,KAAKT,iBAEVS,KAAKP,sBAAwBO,KAAKR,cAExCmC,QAAQC,IAAI,0BACZZ,EAAOhB,KAAK6B,SAAS7B,KAAKN,kBAC1BoB,EAAWd,KAAKN,mBAIhBoB,EAAWgB,OAAOC,SAChB7B,EAAA8B,WAAWhC,KAAKZ,YAAY6C,MAC5B/B,EAAA8B,WAAWhC,KAAKZ,YAAY8C,OAE3BpB,IAAad,KAAKmC,cAAgB,kBAAoBrB,GACvDa,QAAQC,IAAI,aAAad,qDACzBE,EAAOhB,KAAK6B,SAASf,IAEfA,IAAad,KAAKN,kBAAoBoB,IAAad,KAAKT,iBAC9DoC,QAAQC,IAAI,aAAad,+CACzBE,EAAOhB,KAAK6B,SAASf,IAGrBE,EAAO/B,EAAAmD,SAASC,oBAAoBvB,IAGxCd,KAAKwB,UAAUR,EAAMF,GACd,MAAEE,WAAMF,GAEjBwB,kBAGE,OADaR,OAAOS,QAAQ,CAACC,IAAK,OACjBxC,KAAKL,cAExB8C,aAAaC,EAAUP,GAErB,OAAOlD,EAAAmD,SAASC,oBAAoBF,GAEtCN,SAASM,GAEP,GAAGA,IAAiBnC,KAAKH,gBAAkB,kBAAoBsC,EAE7D,OADAR,QAAQC,IAAI,GAAGO,iCACRlD,EAAAmD,SAASC,oBAAoBF,GAEtC,IAAIQ,EAAoB3C,KAAKsC,kBAC7B,GAAG,WAAatC,KAAKJ,iBAAmBI,KAAKJ,iBAAmB+C,EAG5D,OADFhB,QAAQC,IAAI,uCAAqC5B,KAAIJ,mBAC9CX,EAAAmD,SAASQ,iBAAiB5C,KAAKJ,gBAAiBuC,GAEpD,GAAG,WAAanC,KAAKJ,iBAAmBI,KAAKJ,kBAAoB+C,EAAkB,CAGtF,IAAI3B,EAAOhB,KAAKyC,cAAa,EAAON,GACpC,KAAMnB,EAAK6B,OAAS7C,KAAKJ,iBAEvBoB,EAAOhB,KAAKyC,cAAa,EAAON,GAGhC,OADFR,QAAQC,IAAI,qBAAmBZ,EAAI6B,mBAAsB7C,KAAEJ,mBACpDoB,EAKP,OADAW,QAAQC,IAAI,qCACL3C,EAAAmD,SAASC,oBAAoBF,GAIxCW,aACE9C,KAAKV,mBAAqB,EAC1BU,KAAKP,oBAAsB,EAG7BsD,uBAAuBC,QAASC,MAAOC,KACrC,IAAIC,EAAc5C,SAAS6C,eAAe,uBAC1CpD,KAAKJ,gBAAkBsD,EACnB,WAAaA,GACfC,EAAYtC,aAAa,MAAO,GAAG5B,EAAAmD,SAASQ,iBAAiBM,EAAWlD,KAAKH,gBAAgBoB,aAC7FkC,EAAYE,MAAMC,QAAU,MAE5BH,EAAYtC,aAAa,MAAO,IAChCsC,EAAYE,MAAMC,QAAU,GAGhCC,WAGE,MAAMC,EAAqBjD,SAAS6C,eAAe,iBACnDpD,KAAKyD,qBAAuBzD,KAAK+C,sBAAsBW,KAAK1D,MAC5DwD,EAAmBG,iBAAiB,SAAU3D,KAAKyD,sBACnDnC,YAAYC,UAAY,SAASvB,KAAKP,yBAAyBO,KAAKV,qBACpEU,KAAK4D,6BAGPC,YAEuBtD,SAAS6C,eAAe,iBAClB7C,SAAS6C,eAAe,iBAChCU,oBAAoB,SAAU9D,KAAKyD,sBAExDG,6BACE,IAAIG,EAAU,GACVC,EAASzD,SAASC,cAAc,UAGpC,GAFAwD,EAAOC,KAAO,SACdF,EAAQG,KAAKF,EAAOG,WACjBnE,KAAKH,eACN,IAAK,MAAMuE,KAAUnF,EAAAmD,SAASiC,kBAAkBrE,KAAKH,gBACnDmE,EAAOC,KAAOG,EAAOE,MACrBN,EAAOf,MAAQmB,EAAOE,MACtBP,EAAQG,KAAKF,EAAOG,WAGxB,MAAMX,EAAqBjD,SAAS6C,eAAe,iBACnDI,EAAmBO,QAAQQ,OAAS,EACpCf,EAAmBgB,UAAYT,EAAQU,KAAK,MAC5CzE,KAAK+C,sBAAsB,CAACC,OAAQ,CAACC,MAAOO,EAAmBP,UAK5D,MAAMyB,UAAwBvF,EACnCY,YAAYX,GACVuF,MAAMvF,IAIH,MAAMwF,UAAqBzF,EAChCY,YAAYX,GACVuF,MAAMvF,GAERqD,aAAaC,EAAUP,GAGrBlD,EAAAmD,SAASyC,mBAAmBnC,EAAU1C,KAAKJ,gBAAiBuC,GAE9DN,SAASM,GAEP,IAAIQ,EAAoB3C,KAAKsC,kBAC7B,GAAG,WAAatC,KAAKJ,iBAAmBI,KAAKJ,iBAAmB+C,EAG5D,OADFhB,QAAQC,IAAI,uCAAqC5B,KAAIJ,mBAC9CX,EAAAmD,SAASQ,iBAAiB5C,KAAKJ,gBAAiBuC,GAEpD,GAAG,WAAanC,KAAKJ,iBAAmBI,KAAKJ,kBAAoB+C,EAAkB,CAEtF,IAAI3B,EAAOhB,KAAKyC,cAAa,EAAON,GACpC,KAAMnB,EAAK6B,OAAS7C,KAAKJ,iBACvBoB,EAAOhB,KAAKyC,cAAa,EAAON,GAGlC,OADAR,QAAQC,IAAI,qBAAmBZ,EAAE6B,mBAAsB7C,KAAEJ,mBAClDoB,EAKP,OADAW,QAAQC,IAAI,qCACL3C,EAAAmD,SAASC,oBAAoBF,GAGxCX,UAAUR,EAAMF,GAEX,mBAAqBA,EACtBd,KAAKP,oBAAsB,EAErB,kBAAoBqB,IAC1Bd,KAAKP,oBAAsB,EAC3BO,KAAKV,mBAAqB,IAEzBU,KAAKP,oBAAsBO,KAAKR,cAAgBQ,KAAKV,mBAAqBU,KAAKX,cAChFqC,MAAM,2FAKL,MAAMoD,UAA2B3F,EACtCY,YAAYX,GACVuF,MAAMvF,0ECpQV,IAAAc,EAAAhB,EAAA,sBAuEO,MAAM6F,EAAW,IArExB,MACEC,YACAjF,cACEC,KAAKiF,sBAEPC,gBAAgBpE,GACd,OAAOA,GACL,IAAK,gBACH,OAAOqE,EAAAC,sBACT,IAAK,iBACH,OAAOD,EAAAE,uBACT,IAAK,aACL,IAAK,aACL,IAAK,aACL,IAAK,eACH,OAAOF,EAAAG,kBACT,IAAK,gBACL,IAAK,iBACL,IAAK,iBACL,IAAK,kBACL,IAAK,gBACH,OAAOH,EAAAI,eACT,IAAK,OACL,IAAK,MACL,IAAK,YACL,IAAK,oBACH,OAAOJ,EAAAK,aACT,QACE7D,QAAQC,IACN,oBAAoBd,uDAK5BmE,sBACEjF,KAAKgF,YAAc,GACnB,IAAI,MAAMS,KAAUvF,EAAA8B,WACjB9B,EAAA8B,WAAWyD,GAAQxD,MAAOyD,SACzB5E,IACOA,KAAYd,KAAKgF,cACpBhF,KAAKgF,YAAY,GAAGlE,KAAc,IAAKd,KAAKkF,gBAAgBpE,GAA1B,CAAqCA,OAMjFuB,oBAAoBvB,GAClB,IAEE,OAAOd,KAAKgF,YAAYlE,GAAUuB,sBAClC,MAAMsD,GACNhE,QAAQC,IAAId,EAAU6E,IAG1B/C,iBAAiBM,EAAWpC,GAC1B,IACE,OAAOd,KAAKgF,YAAYlE,GAAU8B,iBAAiBM,GACnD,MAAMyC,GACNhE,QAAQC,IAAId,EAAU6E,IAG1BtB,kBAAkBvD,GAChB,OAAOd,KAAKgF,YAAYlE,GAAUuD,oBAEpCQ,mBAAmBnC,EAAU9C,EAAiBkB,GAC5C,OAAOd,KAAKA,KAAKgF,YAAYlE,GAAU+D,mBAAmBnC,EAAU9C,EAAiBkB,wPCnEzF,IAAAZ,EAAAhB,EAAA,SACA,MAAM0G,EACJC,UACA/E,SAGAf,YAAYe,GACVd,KAAKc,SAAWA,EAElBgF,sBAGAzB,oBAEE,OAAOrE,KAAK6F,UAAU7F,KAAKc,UAE7BiF,iBAAiB/E,GACf,MAAO,CAAE6B,KAAM7B,EAAK6B,KAAM5B,UAAW,GAAGjB,KAAK6F,UAAU5E,YAAYD,EAAK6B,WAAYpB,KAAMT,EAAKS,MAEjGuE,OACE,OAAOlE,OAAOmE,QAAQjG,KAAKqE,qBAE7BhC,sBACE,IAAIrB,EAAOhB,KAAKgG,OAChB,OAAOhG,KAAK+F,iBAAiB/E,GAE/B4B,iBAAiBM,GACf,IAAIlC,EAAOhB,KAAKqE,oBAAoB6B,MAAKC,GAAOA,EAAI7B,QAAUpB,IAC9D,OAAOlD,KAAK+F,iBAAiB/E,IAI1B,MAAMoF,UAA0BR,EACrC7F,YAAYe,GACV6D,MAAM7D,GACNd,KAAK6F,UAAY3F,EAAAmG,SAEnBN,iBAAiB/E,GACf,MAAO,CAAE6B,KAAM7B,EAAKsD,MAAOrD,UAAW,GAAGjB,KAAK6F,UAAU5E,YAAYD,EAAKsD,YAAa7C,KAAMT,EAAKS,OAI9F,MAAM6E,UAA8BF,EACzCG,KACAxG,YAAYe,GACV6D,MAAM7D,GACNd,KAAK8F,qBAEPA,qBACE9F,KAAKuG,KAAO,GACZvG,KAAKuG,KAAKrC,QAAShE,EAAAmG,SAASG,cAAiBtG,EAAAmG,SAASI,YAExDpC,oBAEE,OAAOrE,KAAKuG,MAIT,MAAMG,UAA+BN,EAC1CG,KACAxG,YAAYe,GACV6D,MAAM7D,GACNd,KAAK8F,qBAEPA,qBACE9F,KAAKuG,KAAO,GACZvG,KAAKuG,KAAKrC,QAAShE,EAAAmG,SAASG,cAAiBtG,EAAAmG,SAASI,cAAiBvG,EAAAmG,SAASM,YAElFtC,oBAEE,OAAOrE,KAAKuG,MAIT,MAAMK,UAAuBhB,EAClC7F,YAAYe,GACV6D,MAAM7D,GACNd,KAAK6F,UAAY3F,EAAA2G,WAEnBd,iBAAiB/E,GACf,GAAG,kBAAoBhB,KAAKc,SAC1B,IAAI,MAAOgG,EAAKC,KAAQC,OAAOC,QAAQjG,GACrCA,EAAOA,EAAK8F,GAAK,GAIrB,OADAnF,QAAQC,IAAI,mCAAmCZ,UAAahB,KAAK6F,UAAU5E,YAAYD,UAChF,CAAE6B,KAAM7B,EAAMC,UAAW,GAAGjB,KAAK6F,UAAU5E,YAAYD,SAEhE4B,iBAAiBF,EAAU9C,EAAiBkB,GAE1C,IAAIE,EAAOhB,KAAKqE,kBAAkBzE,GAQlC,OANEoB,EADC,mBAAqBF,EACfE,EAAK,GAGL0B,EAAW1B,EAAK,GAAKA,EAAKc,OAAOoF,QAAQ,CAACC,IAAK,EAAG3E,IAAK,KAEhEb,QAAQC,IAAI,mCAAmCZ,UAAahB,KAAK6F,UAAU5E,YAAYD,UAChF,CAAE6B,KAAM7B,EAAMC,UAAW,GAAGjB,KAAK6F,UAAU5E,YAAYD,UAI3D,MAAMoG,UAAqBxB,EAChC7F,YAAYe,GACV6D,MAAM7D,GACNd,KAAK6F,UAAY3F,EAAAmH,SAEnBtB,iBAAiB/E,GACf,MAAO,CAAE6B,KAAM7B,EAAMC,UAAW,GAAGjB,KAAK6F,UAAU5E,YAAYD","sources":["src/Banner.js","src/ItemDatabase.js","src/DropSelector.js"],"sourcesContent":["import {database} from \"./ItemDatabase.js\";\nimport { bannerData, dropTables } from \"./data.js\";\nexport class Banner {\n  bannerType;\n\n  sixStarPity; // either S rank or 6* weapon\n\n  currentSixStarPity;\n\n  sixStarPityType;\n\n  fiveStarPity; // either A rank or 5* weapon\n\n  currentFiveStarPity;\n\n  fiveStarPityType;\n  \n  rateUpPercent;\n\n  rateUpSelection;\n\n  rateUpCategory;\n\n  currentRolls;\n\n  constructor(bannerType) {\n    this.bannerType = bannerType;\n    this.currentFiveStarPity = 0;\n    this.currentSixStarPity = 0;\n    this.rateUpPercent = 70;\n    this.rateUpCategory = ``;\n    this.parseData();\n  }\n\n  parseData() {\n    this.rateUpPercent = bannerData[this.bannerType].rateUpChance;\n    this.rateUpCategory = bannerData[this.bannerType].rateUpCategory;\n    this.sixStarPity = bannerData[this.bannerType].sixStarPity;\n    this.fiveStarPity = bannerData[this.bannerType].fiveStarPity;\n    this.fiveStarPityType = bannerData[this.bannerType].fiveStarPityType;\n    this.sixStarPityType = bannerData[this.bannerType].sixStarPityType;\n  }\n\n  roll10() {\n    let parent = document.createElement(`div`);\n    for (let ind = 1; ind <= 10; ind += 1) {\n      // use a map on currentRolls with roll1\n      let dropObj = this.roll1();\n      let imageDiv = document.createElement(`div`);\n      imageDiv.setAttribute(`class`, `${dropObj.category} itemDisplay`);\n      let dropImage = document.createElement(`img`);\n      dropImage.setAttribute(`src`, `${dropObj.drop.assetPath}`);\n      dropImage.setAttribute(`class`, `${dropObj.category}`);\n      imageDiv.appendChild(dropImage);\n      parent.appendChild(imageDiv);\n    }\n    this.currentRolls = parent;\n    let domParent = document.querySelector(`.parent2`);\n    domParent.replaceChildren(...parent.childNodes);\n    pityCounter.innerText = `Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`;\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(drop.rank === `A` && `constructShard` !== category){\n      this.currentFiveStarPity = 0;\n    }\n    else if(drop.rank === `S` && `constructShard` !== category){\n      this.currentFiveStarPity = 0;\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentFiveStarPity > this.fiveStarPity || this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n  roll1() {\n    let drop;\n    let category;\n    this.currentFiveStarPity++;\n    this.currentSixStarPity++;\n    //need six star pity check first\n    //otherwise, can trigger edge case of hitting 5 star pity at 60, giving A construct instead of S construct\n    if(this.currentSixStarPity === this.sixStarPity){\n      //drop = database.pickOneFromCategory(this.sixStarPityType);\n      console.log(`six star pity reached`);\n      drop = this.pickPity(this.sixStarPityType);\n      category = this.sixStarPityType;\n    }\n    else if(this.currentFiveStarPity === this.fiveStarPity){\n      //drop = database.pickOneFromCategory(this.fiveStarPityType);\n      console.log(`five star pity reached`);\n      drop = this.pickPity(this.fiveStarPityType);\n      category = this.fiveStarPityType;\n    }\n    else{\n      //in case our nonpity drop gave us a lucky early jackpot, we need to apply rate up as well\n      category = chance.weighted(\n        dropTables[this.bannerType].items,\n        dropTables[this.bannerType].rates\n      );\n      if(category === this.pityCategory || `bOrAConstruct` === category){\n        console.log(`Got lucky ${category} drop of rate up category, check rate up success`);\n        drop = this.pickPity(category);\n      }\n      else if(category === this.fiveStarPityType || category === this.sixStarPityType){\n        console.log(`Got lucky ${category} drop not of rate up category, pick random`);\n        drop = this.pickPity(category);\n      }\n      else{\n        drop = database.pickOneFromCategory(category);\n      }\n    }\n    this.checkPity(drop, category);\n    return { drop, category };\n  }\n  isSuccessRateUp(){\n    //weapon banner must override to deal with different rates\n    let random = chance.natural({max: 100});\n    return random <= this.rateUpPercent;\n  }\n  pickPityDrop(isRateUp, pityCategory){\n    //weapon banner must override to deal with offrates\n    return database.pickOneFromCategory(pityCategory);\n  }\n  pickPity(pityCategory) {\n    //don't do rate up calculations if it's not the same category. Prevents A selections from stifling S pity drops\n    if(pityCategory !== this.rateUpCategory && `bOrAConstruct` !== pityCategory){\n      console.log(`${pityCategory} does not have rate up, skip`);\n      return database.pickOneFromCategory(pityCategory); \n    }\n    let getSelectedRateUp = this.isSuccessRateUp();\n    if(`Select` !== this.rateUpSelection && this.rateUpSelection && getSelectedRateUp){\n      //rate up is not a lie\n      console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`);\n      return database.pickSpecificDrop(this.rateUpSelection, pityCategory);\n    }\n    else if(`Select` !== this.rateUpSelection && this.rateUpSelection && !getSelectedRateUp){\n      //rate up is a lie\n      //let drop = database.pickOneFromCategory(pityCategory);\n      let drop = this.pickPityDrop(false, pityCategory);\n      while(drop.name === this.rateUpSelection){\n        //drop = database.pickOneFromCategory(pityCategory);\n        drop = this.pickPityDrop(false, pityCategory);\n      }\n      console.log(`Rateup ❌, picking ${drop.name} instead of ${this.rateUpSelection}`);\n      return drop;\n    }\n    else{\n      //no rate up\n      console.log(`No rate up, pick something random`);\n      return database.pickOneFromCategory(pityCategory);\n    }\n  }\n\n  clearStats() {\n    this.currentSixStarPity = 0;\n    this.currentFiveStarPity = 0;\n  }\n\n  changeRateUpSelection({target: {value: selection}}) {\n    let choiceImage = document.getElementById(`select-target-image`);\n    this.rateUpSelection = selection;\n    if (`Select` !== selection) {\n      choiceImage.setAttribute(`src`, `${database.pickSpecificDrop(selection, this.rateUpCategory).assetPath}`);\n      choiceImage.style.opacity = 100; // there has to be a smarter way to hide the picture when the choice is select?\n    } else {\n      choiceImage.setAttribute(`src`, ``);\n      choiceImage.style.opacity = 0;\n    }\n  }\n  switchIn(){\n    //add event listeners, populateBannerTargetSelect if there are any, update pity display\n    //future nice to do is to restore \"history\" of the last 10 pulls on this banner\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    this.targetSelectListener = this.changeRateUpSelection.bind(this);\n    bannerTargetSelect.addEventListener(`change`, this.targetSelectListener); //https://stackoverflow.com/questions/11565471/removing-event-listener-which-was-added-with-bind\n    pityCounter.innerText = `Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`;\n    this.populateBannerTargetSelect();\n\n  }\n  switchOut(){\n    //remove event listeners\n    const bannerSelect = document.getElementById(`select-banner`);\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    bannerTargetSelect.removeEventListener(`change`, this.targetSelectListener);\n  }\n  populateBannerTargetSelect(){\n    let options = [];\n    let option = document.createElement(`option`);\n    option.text = `Select`;\n    options.push(option.outerHTML);\n    if(this.rateUpCategory){\n      for (const choice of database.getReferenceTable(this.rateUpCategory)) {\n        option.text = choice.frame;\n        option.value = choice.frame;\n        options.push(option.outerHTML);\n      }\n    }\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    bannerTargetSelect.options.length = 0;\n    bannerTargetSelect.innerHTML = options.join('\\n');\n    this.changeRateUpSelection({target: {value: bannerTargetSelect.value}});\n  }\n  \n}\n\nexport class ConstructBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}\n\nexport class WeaponBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n  pickPityDrop(isRateUp, pityCategory){\n    //need to be generalized for both 5 star and 6 star weapons\n    //the 6 star weapon array needs to be processed before returning\n    database.pickTargetedWeapon(isRateUp, this.rateUpSelection, pityCategory);\n  }\n  pickPity(pityCategory) {\n    //pity category applies to both 5 and 6 star weapons\n    let getSelectedRateUp = this.isSuccessRateUp();\n    if(`Select` !== this.rateUpSelection && this.rateUpSelection && getSelectedRateUp){\n      //rate up is not a lie\n      console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`);\n      return database.pickSpecificDrop(this.rateUpSelection, pityCategory);\n    }\n    else if(`Select` !== this.rateUpSelection && this.rateUpSelection && !getSelectedRateUp){\n      //rate up is a lie\n      let drop = this.pickPityDrop(false, pityCategory);\n      while(drop.name === this.rateUpSelection){\n        drop = this.pickPityDrop(false, pityCategory);\n      }\n      console.log(`Rateup ❌, picking ${drop.name} instead of ${this.rateUpSelection}`);\n      return drop;\n    }\n    else{\n      //no rate up\n      console.log(`No rate up, pick something random`);\n      return database.pickOneFromCategory(pityCategory);\n    }\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(`fiveStarWeapon` === category){\n      this.currentFiveStarPity = 0;\n    }\n    else if(`sixStarWeapon` === category){\n      this.currentFiveStarPity = 0;\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentFiveStarPity > this.fiveStarPity || this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n}\n\nexport class TranscendantBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}","import {dropTables} from \"./data.js\";\nimport { BOrAConstructSelector, ConstructShardSelector, ConstructSelector, WeaponSelector, ItemSelector } from \"./DropSelector.js\";\nclass ItemDatabase {\n  lookupTable;\n  constructor() {\n    this.generateLookupTable();\n  }\n  categoryToClass(category){\n    switch(category){\n      case `bOrAConstruct`:\n        return BOrAConstructSelector;\n      case `constructShard`:\n        return ConstructShardSelector;\n      case `bConstruct`:\n      case `aConstruct`:\n      case `sConstruct`:\n      case `transcendant`:\n        return ConstructSelector;\n      case `sixStarWeapon`:\n      case `fiveStarWeapon`:\n      case `fourStarWeapon`:\n      case `threeStarWeapon`:\n      case `twoStarWeapon`:\n        return WeaponSelector;\n      case `cogs`:\n      case `exp`:\n      case `overclock`:\n      case `fourStarEquipment`:\n        return ItemSelector;\n      default:\n        console.log(\n          `categoryToClass: ${category} is not a valid category. Please create an issue.`\n        );\n        break;\n    }\n  }\n  generateLookupTable(){\n    this.lookupTable = {};\n    for(const banner in dropTables){\n      (dropTables[banner].items).forEach(\n        category => {\n          if(!(category in this.lookupTable)){\n            this.lookupTable[`${category}`] = new (this.categoryToClass(category))(category);\n          }\n        }\n      );\n    }\n  }\n  pickOneFromCategory(category) {\n    try{\n      //console.log(`Database pick one from ${category}`);\n      return this.lookupTable[category].pickOneFromCategory();\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  pickSpecificDrop(selection, category) {\n    try{\n      return this.lookupTable[category].pickSpecificDrop(selection);\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  getReferenceTable(category){\n    return this.lookupTable[category].getReferenceTable();\n  }\n  pickTargetedWeapon(isRateUp, rateUpSelection, category){\n    return this.this.lookupTable[category].pickTargetedWeapon(isRateUp, rateUpSelection, category);\n  }\n}\n\nexport const database = new ItemDatabase();","import {unitData, itemData, weaponData} from \"./data.js\";\nclass BaseSelector{\n  dataTable;\n  category;\n\n  //baseSelector is for constructs. Weapon banner needs to override as needed\n  constructor(category){\n    this.category = category;\n  }\n  generateCustomList(){\n    //don't call from constructor unless it's needed\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.dataTable[this.category];\n  }\n  packReturnObject(drop){\n    return { name: drop.name, assetPath: `${this.dataTable.assetPath}${drop.name}.png`, rank: drop.rank };\n  }\n  pick(){\n    return chance.pickone(this.getReferenceTable());\n  }\n  pickOneFromCategory(){\n    let drop = this.pick();\n    return this.packReturnObject(drop);\n  }\n  pickSpecificDrop(selection){\n    let drop = this.getReferenceTable().find(obj => obj.frame === selection);\n    return this.packReturnObject(drop);\n  }\n}\n\nexport class ConstructSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = unitData;\n  }\n  packReturnObject(drop){\n    return { name: drop.frame, assetPath: `${this.dataTable.assetPath}${drop.frame}.png`, rank: drop.rank };\n  }\n}\n\nexport class BOrAConstructSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class ConstructShardSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct), ...(unitData.sConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class WeaponSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = weaponData;\n  }\n  packReturnObject(drop){\n    if(`sixStarWeapon` === this.category){\n      for(const [key, val] of Object.entries(drop)){\n        drop = drop[key][0];\n      }\n    }\n    console.log(`WeaponSelector returning object ${drop} path ${this.dataTable.assetPath}${drop}.png}`);\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n  pickSpecificDrop(isRateUp, rateUpSelection, category){\n    //only used in targeted weapon banner for 5 and 6 star weapon drops\n    let drop = this.getReferenceTable[rateUpSelection];\n    if(`fiveStarWeapon` === category){\n      drop = drop[3];\n    }\n    else{\n      drop = isRateUp ? drop[0] : drop[chance.integer({min: 1, max: 2})];\n    }\n    console.log(`WeaponSelector returning object ${drop} path ${this.dataTable.assetPath}${drop}.png}`);\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n}\n\nexport class ItemSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = itemData;\n  }\n  packReturnObject(drop){\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n}\n"],"names":["$7x8Nx","parcelRequire","$828131a16b3c365e$export$3b4e64e77073e307","bannerType","sixStarPity","currentSixStarPity","sixStarPityType","fiveStarPity","currentFiveStarPity","fiveStarPityType","rateUpPercent","rateUpSelection","rateUpCategory","currentRolls","constructor","this","parseData","$3ESMo","bannerData","rateUpChance","roll10","parent","document","createElement","ind","dropObj","roll1","imageDiv","setAttribute","category","dropImage","drop","assetPath","appendChild","querySelector","replaceChildren","childNodes","pityCounter","innerText","checkPity","rank","alert","console","log","pickPity","chance","weighted","dropTables","items","rates","pityCategory","database","pickOneFromCategory","isSuccessRateUp","natural","max","pickPityDrop","isRateUp","getSelectedRateUp","pickSpecificDrop","name","clearStats","changeRateUpSelection","target","value","selection","choiceImage","getElementById","style","opacity","switchIn","bannerTargetSelect","targetSelectListener","bind","addEventListener","populateBannerTargetSelect","switchOut","removeEventListener","options","option","text","push","outerHTML","choice","getReferenceTable","frame","length","innerHTML","join","$828131a16b3c365e$export$25abf57ee44fafc8","super","$828131a16b3c365e$export$f6dc28c6c2686749","pickTargetedWeapon","$828131a16b3c365e$export$931ac376e10bcf3f","$57c27093f03009f4$export$a62f5db2b03ceea3","lookupTable","generateLookupTable","categoryToClass","$290LY","BOrAConstructSelector","ConstructShardSelector","ConstructSelector","WeaponSelector","ItemSelector","banner","forEach","err","$18fd0582bd06dd25$var$BaseSelector","dataTable","generateCustomList","packReturnObject","pick","pickone","find","obj","$18fd0582bd06dd25$export$70e7f81334bb0cf","unitData","$18fd0582bd06dd25$export$bb5c549a3bd1e962","list","bConstruct","aConstruct","$18fd0582bd06dd25$export$7f296522a910d543","sConstruct","$18fd0582bd06dd25$export$a259bacf402cc988","weaponData","key","val","Object","entries","integer","min","$18fd0582bd06dd25$export$cd303fea6ed83a4","itemData"],"version":3,"file":"index.b8864b44.js.map"}