{"mappings":"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","sources":["src/Banner.js","src/ItemDatabase.js","src/DropSelector.js"],"sourcesContent":["import {database} from \"./ItemDatabase.js\";\nimport { bannerData, dropTables } from \"./data.js\";\nexport class Banner {\n  bannerType;\n\n  sixStarPity; // either S rank or 6* weapon\n\n  currentSixStarPity;\n\n  sixStarPityType;\n\n  fiveStarPity; // either A rank or 5* weapon\n\n  currentFiveStarPity;\n\n  fiveStarPityType;\n  \n  rateUpPercent;\n\n  rateUpSelection;\n\n  rateUpCategory;\n\n  currentRolls;\n\n  constructor(bannerType) {\n    this.bannerType = bannerType;\n    this.currentFiveStarPity = 0;\n    this.currentSixStarPity = 0;\n    this.rateUpPercent = 70;\n    this.rateUpCategory = ``;\n    this.parseData();\n  }\n\n  parseData() {\n    this.rateUpPercent = bannerData[this.bannerType].rateUpChance;\n    this.rateUpCategory = bannerData[this.bannerType].rateUpCategory;\n    this.sixStarPity = bannerData[this.bannerType].sixStarPity;\n    this.fiveStarPity = bannerData[this.bannerType].fiveStarPity;\n    this.fiveStarPityType = bannerData[this.bannerType].fiveStarPityType;\n    this.sixStarPityType = bannerData[this.bannerType].sixStarPityType;\n  }\n  updatePityDisplay(){\n    pityCounter.innerText = `Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`;\n  }\n  roll10() {\n    let parent = document.createElement(`div`);\n    for (let ind = 1; ind <= 10; ind += 1) {\n      // use a map on currentRolls with roll1\n      let dropObj = this.roll1();\n      let imageDiv = document.createElement(`div`);\n      imageDiv.setAttribute(`class`, `${dropObj.category} itemDisplay`);\n      let dropImage = document.createElement(`img`);\n      dropImage.setAttribute(`src`, `${dropObj.drop.assetPath}`);\n      dropImage.setAttribute(`class`, `${dropObj.category}`);\n      imageDiv.appendChild(dropImage);\n      parent.appendChild(imageDiv);\n    }\n    this.currentRolls = parent;\n    let domParent = document.querySelector(`.parent2`);\n    domParent.replaceChildren(...parent.childNodes);\n    this.updatePityDisplay();\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(drop.rank === `A` && `constructShard` !== category){\n      this.currentFiveStarPity = 0;\n    }\n    else if(drop.rank === `S` && `constructShard` !== category){\n      this.currentFiveStarPity = 0;\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentFiveStarPity > this.fiveStarPity || this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n  incrementPity(){\n    this.currentFiveStarPity++;\n    this.currentSixStarPity++;\n  }\n  roll1() {\n    let drop;\n    let category;\n    this.incrementPity();\n    //need six star pity check first\n    //otherwise, can trigger edge case of hitting 5 star pity at 60, giving A construct instead of S construct\n    if(this.currentSixStarPity === this.sixStarPity){\n      console.log(`six star pity reached`);\n      drop = this.pickPity(this.sixStarPityType);\n      category = this.sixStarPityType;\n    }\n    else if(this.currentFiveStarPity === this.fiveStarPity){\n      console.log(`five star pity reached`);\n      drop = this.pickPity(this.fiveStarPityType);\n      category = this.fiveStarPityType;\n    }\n    else{\n      //in case our nonpity drop gave us a lucky early jackpot, we need to apply rate up as well\n      category = chance.weighted(\n        dropTables[this.bannerType].items,\n        dropTables[this.bannerType].rates\n      );\n      if(category === this.pityCategory || `bOrAConstruct` === category){\n        console.log(`Got lucky ${category} drop of rate up category, check rate up success`);\n        drop = this.pickPity(category);\n      }\n      else if(category === this.fiveStarPityType || category === this.sixStarPityType){\n        console.log(`Got lucky ${category} drop not of rate up category, pick random`);\n        drop = this.pickPity(category);\n      }\n      else{\n        drop = database.pickOneFromCategory(category);\n      }\n    }\n    this.checkPity(drop, category);\n    return { drop, category };\n  }\n  isSuccessRateUp(){\n    //weapon banner must override to deal with different rates\n    let random = chance.natural({max: 100});\n    return random <= this.rateUpPercent;\n  }\n  pickPityDrop(pityCategory){\n    //weapon banner must override to deal with offrates\n    return database.pickOneFromCategory(pityCategory);\n  }\n  pickPity(pityCategory) {\n    //don't do rate up calculations if it's not the same category. Prevents A selections from stifling S pity drops\n    if(pityCategory !== this.rateUpCategory && !(`bOrAConstruct` === pityCategory && `aConstruct` === this.rateUpCategory)){\n      console.log(`${pityCategory} does not have rate up, skip`);\n      return database.pickOneFromCategory(pityCategory); \n    }\n    let getSelectedRateUp = this.isSuccessRateUp();\n    if(`Select` !== this.rateUpSelection && this.rateUpSelection && getSelectedRateUp){\n      //rate up is not a lie\n      console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`);\n      return database.pickSpecificDrop(this.rateUpSelection, pityCategory);\n    }\n    else if(`Select` !== this.rateUpSelection && this.rateUpSelection && !getSelectedRateUp){\n      //rate up is a lie\n      let drop = this.pickPityDrop(pityCategory);\n      while(drop.name === this.rateUpSelection){\n        drop = this.pickPityDrop(pityCategory);\n      }\n      console.log(`Rateup ❌, picking ${drop.name} instead of ${this.rateUpSelection}`);\n      return drop;\n    }\n    else{\n      //no rate up\n      console.log(`No rate up, pick something random`);\n      return database.pickOneFromCategory(pityCategory);\n    }\n  }\n  clearStats() {\n    this.currentSixStarPity = 0;\n    this.currentFiveStarPity = 0;\n  }\n  changeRateUpSelection({target: {value: selection}}) {\n    let choiceImage = document.getElementById(`select-target-image`);\n    this.rateUpSelection = selection;\n    if (`Select` !== selection) {\n      choiceImage.setAttribute(`src`, `${database.pickSpecificDrop(selection, this.rateUpCategory).assetPath}`);\n      choiceImage.style.opacity = 100; // there has to be a smarter way to hide the picture when the choice is select?\n    } else {\n      choiceImage.setAttribute(`src`, ``);\n      choiceImage.style.opacity = 0;\n    }\n  }\n  switchIn(){\n    //add event listeners, populateBannerTargetSelect if there are any, update pity display\n    //future nice to do is to restore \"history\" of the last 10 pulls on this banner\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    this.targetSelectListener = this.changeRateUpSelection.bind(this);\n    bannerTargetSelect.addEventListener(`change`, this.targetSelectListener); //https://stackoverflow.com/questions/11565471/removing-event-listener-which-was-added-with-bind\n    this.updatePityDisplay();\n    this.populateBannerTargetSelect();\n\n  }\n  switchOut(){\n    //remove event listeners\n    const bannerSelect = document.getElementById(`select-banner`);\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    bannerTargetSelect.removeEventListener(`change`, this.targetSelectListener);\n  }\n  populateBannerTargetSelect(){\n    let options = [];\n    let option = document.createElement(`option`);\n    option.text = `Select`;\n    options.push(option.outerHTML);\n    if(this.rateUpCategory){\n      for (const choice of database.getReferenceTable(this.rateUpCategory)) {\n        option.text = choice.frame;\n        option.value = choice.frame;\n        options.push(option.outerHTML);\n      }\n    }\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    bannerTargetSelect.options.length = 0;\n    bannerTargetSelect.innerHTML = options.join('\\n');\n    this.changeRateUpSelection({target: {value: bannerTargetSelect.value}});\n  }\n  \n}\n\nexport class ConstructBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}\n\nexport class WeaponBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n  pickPityDrop(pityCategory, isRateUp){\n    //need to be generalized for both 5 star and 6 star weapons\n    //the 6 star weapon array needs to be processed before returning\n    return database.pickTargetedWeapon(this.rateUpSelection, pityCategory, isRateUp);\n  }\n  pickPity(pityCategory) {\n    //pity category applies to both 5 and 6 star weapons\n    let getSelectedRateUp = this.isSuccessRateUp();\n    if(`Select` !== this.rateUpSelection && this.rateUpSelection && getSelectedRateUp){\n      //rate up is not a lie\n      console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`);\n      return this.pickPityDrop(pityCategory, true);\n    }\n    else if(`Select` !== this.rateUpSelection && this.rateUpSelection && !getSelectedRateUp){\n      //rate up is a lie\n      let drop = this.pickPityDrop(pityCategory, false);\n      while(drop.name === this.rateUpSelection){\n        drop = this.pickPityDrop(pityCategory, false);\n      }\n      console.log(`Rateup ❌, picking ${drop.name} instead of ${this.rateUpSelection}`);\n      return drop;\n    }\n    else{\n      //no rate up\n      console.log(`No rate up, pick something random`);\n      return database.pickOneFromCategory(pityCategory);\n    }\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(`fiveStarWeapon` === category){\n      this.currentFiveStarPity = 0;\n    }\n    else if(`sixStarWeapon` === category){\n      this.currentFiveStarPity = 0;\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentFiveStarPity > this.fiveStarPity || this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n  populateBannerTargetSelect(){\n    let options = [];\n    let option = document.createElement(`option`);\n    option.text = `Select`;\n    options.push(option.outerHTML);\n    if(this.rateUpCategory){\n      console.log(this.rateUpCategory);\n      for(const key in database.getReferenceTable(this.rateUpCategory)){\n        option.text = key;\n        option.value = option.text;\n        options.push(option.outerHTML);\n      }\n    }\n    const bannerTargetSelect = document.getElementById(`select-target`);\n    bannerTargetSelect.options.length = 0;\n    bannerTargetSelect.innerHTML = options.join('\\n');\n    this.changeRateUpSelection({target: {value: bannerTargetSelect.value}});\n  }\n}\n\nexport class TranscendantBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n    this.currentFiveStarPity = -1;\n  }\n  incrementPity(){\n    this.currentSixStarPity++;\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(`transcendant` === category){\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n  updatePityDisplay(){\n    pityCounter.innerText = `Pity: ${this.currentSixStarPity}`;\n  }\n}","import {dropTables} from \"./data.js\";\nimport { BOrAConstructSelector, ConstructShardSelector, ConstructSelector, WeaponSelector, ItemSelector } from \"./DropSelector.js\";\nclass ItemDatabase {\n  lookupTable;\n  constructor() {\n    this.generateLookupTable();\n  }\n  categoryToClass(category){\n    switch(category){\n      case `bOrAConstruct`:\n        return BOrAConstructSelector;\n      case `constructShard`:\n        return ConstructShardSelector;\n      case `bConstruct`:\n      case `aConstruct`:\n      case `sConstruct`:\n      case `transcendant`:\n        return ConstructSelector;\n      case `sixStarWeapon`:\n      case `fiveStarWeapon`:\n      case `fourStarWeapon`:\n      case `threeStarWeapon`:\n      case `twoStarWeapon`:\n        return WeaponSelector;\n      case `cogs`:\n      case `exp`:\n      case `overclock`:\n      case `fourStarEquipment`:\n        return ItemSelector;\n      default:\n        console.log(\n          `categoryToClass: ${category} is not a valid category. Please create an issue.`\n        );\n        break;\n    }\n  }\n  generateLookupTable(){\n    this.lookupTable = {};\n    for(const banner in dropTables){\n      (dropTables[banner].items).forEach(\n        category => {\n          if(!(category in this.lookupTable)){\n            this.lookupTable[`${category}`] = new (this.categoryToClass(category))(category);\n          }\n        }\n      );\n    }\n  }\n  pickOneFromCategory(category) {\n    try{\n      //console.log(`Database pick one from ${category}`);\n      return this.lookupTable[category].pickOneFromCategory();\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  pickSpecificDrop(selection, category, isRateUp = true) {\n    try{\n      return this.lookupTable[category].pickSpecificDrop(selection, category, isRateUp);\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  getReferenceTable(category){\n    return this.lookupTable[category].getReferenceTable();\n  }\n  pickTargetedWeapon(rateUpSelection, category, isRateUp){\n    return this.lookupTable[category].pickSpecificDrop(rateUpSelection, category, isRateUp);\n  }\n}\n\nexport const database = new ItemDatabase();","import {unitData, itemData, weaponData} from \"./data.js\";\nclass BaseSelector{\n  dataTable;\n  category;\n\n  //baseSelector is for constructs. Weapon banner needs to override as needed\n  constructor(category){\n    this.category = category;\n  }\n  generateCustomList(){\n    //don't call from constructor unless it's needed\n  }\n  getReferenceTable(category = this.category){\n    //some banners need to override this to return its own custom array\n    return this.dataTable[category];\n  }\n  packReturnObject(drop){\n    try{\n      return { name: drop.name, assetPath: `${this.dataTable.assetPath}${drop.name}.png`, rank: drop.rank };\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  pick(){\n    return chance.pickone(this.getReferenceTable());\n  }\n  pickOneFromCategory(){\n    let drop = this.pick();\n    return this.packReturnObject(drop);\n  }\n  pickSpecificDrop(selection, category, isRateUp){\n    let drop = this.getReferenceTable().find(obj => obj.frame === selection);\n    return this.packReturnObject(drop);\n  }\n}\n\nexport class ConstructSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = unitData;\n  }\n  packReturnObject(drop){\n    return { name: drop.frame, assetPath: `${this.dataTable.assetPath}${drop.frame}.png`, rank: drop.rank };\n  }\n}\n\nexport class BOrAConstructSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class ConstructShardSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct), ...(unitData.sConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class WeaponSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = weaponData;\n  }\n  packReturnObject(drop){\n    if(`sixStarWeapon` === this.category){\n      drop = this.getReferenceTable()[drop][0];\n    }\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n  pickSpecificDrop(selection, category, isRateUp){\n    //only used in targeted weapon banner for 5 and 6 star weapon drops\n    /*\n    Since the dropdown menu choices have spaces but the filenames do not, multi-word six star weapon keys do not match the filenames\n    The offrate five star weapons need to reference the offrate array. Therefore we are forced to set up the six star weapon data array to match the dropdown menu's string (which is why offrates have spaces) so the offrate object can be referenced\n    Procedure is as such:\n    1. Get onrate array.\n    2. If offrate, get the string of the offrate weapon from the onrate array.\n    3. Use offrate weapon string to get offrate array. This guarantees the next step will reference the correct weapon array\n    4. Check if a five star weapon should be returned. If so return the last element. If not, return the first element.\n    */\n    let drop = this.getReferenceTable(`sixStarWeapon`)[selection];\n    if(!isRateUp){\n      drop = this.getReferenceTable(`sixStarWeapon`)[selection][chance.integer({min: 1, max: 2})]; //get offrate weapon string\n      drop = this.getReferenceTable(`sixStarWeapon`)[drop]; //get the offrate array\n    }\n    //we will always have the correct weapon array here\n    if(`fiveStarWeapon` === category){\n      drop = drop[3];\n    }\n    else{\n      drop = drop[0];\n    }\n    //console.log(`WeaponSelector returning object ${drop} path ${this.dataTable.assetPath}${drop}.png}`);\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n  pick(){\n    if(`sixStarWeapon` === this.category){\n      return chance.pickone(Object.keys(this.getReferenceTable()));\n    }\n    else{\n      return super.pick();\n    }\n  }\n}\n\nexport class ItemSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = itemData;\n  }\n  packReturnObject(drop){\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n}\n"],"names":["$7x8Nx","parcelRequire","$828131a16b3c365e$export$3b4e64e77073e307","bannerType","sixStarPity","currentSixStarPity","sixStarPityType","fiveStarPity","currentFiveStarPity","fiveStarPityType","rateUpPercent","rateUpSelection","rateUpCategory","currentRolls","constructor","this","parseData","$3ESMo","bannerData","rateUpChance","updatePityDisplay","pityCounter","innerText","roll10","parent","document","createElement","ind","dropObj","roll1","imageDiv","setAttribute","category","dropImage","drop","assetPath","appendChild","querySelector","replaceChildren","childNodes","checkPity","rank","alert","incrementPity","console","log","pickPity","chance","weighted","dropTables","items","rates","pityCategory","database","pickOneFromCategory","isSuccessRateUp","natural","max","pickPityDrop","getSelectedRateUp","pickSpecificDrop","name","clearStats","changeRateUpSelection","target","value","selection","choiceImage","getElementById","style","opacity","switchIn","bannerTargetSelect","targetSelectListener","bind","addEventListener","populateBannerTargetSelect","switchOut","removeEventListener","options","option","text","push","outerHTML","choice","getReferenceTable","frame","length","innerHTML","join","$828131a16b3c365e$export$25abf57ee44fafc8","super","$828131a16b3c365e$export$f6dc28c6c2686749","isRateUp","pickTargetedWeapon","key","$828131a16b3c365e$export$931ac376e10bcf3f","$57c27093f03009f4$export$a62f5db2b03ceea3","lookupTable","generateLookupTable","categoryToClass","$290LY","BOrAConstructSelector","ConstructShardSelector","ConstructSelector","WeaponSelector","ItemSelector","banner","forEach","err","$18fd0582bd06dd25$var$BaseSelector","dataTable","generateCustomList","packReturnObject","pick","pickone","find","obj","$18fd0582bd06dd25$export$70e7f81334bb0cf","unitData","$18fd0582bd06dd25$export$bb5c549a3bd1e962","list","bConstruct","aConstruct","$18fd0582bd06dd25$export$7f296522a910d543","sConstruct","$18fd0582bd06dd25$export$a259bacf402cc988","weaponData","integer","min","Object","keys","$18fd0582bd06dd25$export$cd303fea6ed83a4","itemData"],"version":3,"file":"index.9b79c7b2.js.map"}