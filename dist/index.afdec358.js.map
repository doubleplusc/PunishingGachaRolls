{"mappings":"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","sources":["src/Banner.js","src/ItemDatabase.js","src/DropSelector.js"],"sourcesContent":["import {database} from \"./ItemDatabase.js\";\nimport { bannerData, dropTables } from \"./data.js\";\nexport class Banner {\n  bannerType;\n\n  sixStarPity; // either S rank or 6* weapon\n\n  currentSixStarPity;\n\n  sixStarPityType;\n\n  fiveStarPity; // either A rank or 5* weapon\n\n  currentFiveStarPity;\n\n  fiveStarPityType;\n  \n  rateUpPercent;\n\n  rateUpSelection;\n\n  rateUpCategory;\n\n  currentRolls;\n\n  constructor(bannerType) {\n    this.bannerType = bannerType;\n    this.currentFiveStarPity = 0;\n    this.currentSixStarPity = 0;\n    this.rateUpPercent = 70;\n    this.rateUpCategory = ``;\n    this.parseData();\n  }\n\n  parseData() {\n    //console.log(this.bannerType, bannerData[this.bannerType].rateUpChance, bannerData[this.bannerType].sixStarPity, bannerData[this.bannerType].fiveStarPity);\n    this.rateUpPercent = bannerData[this.bannerType].rateUpChance;\n    this.sixStarPity = bannerData[this.bannerType].sixStarPity;\n    this.fiveStarPity = bannerData[this.bannerType].fiveStarPity;\n    this.fiveStarPityType = bannerData[this.bannerType].fiveStarPityType;\n    this.sixStarPityType = bannerData[this.bannerType].sixStarPityType;\n    this.rateUpCategory = `aConstruct`;\n  }\n\n  roll10() {\n    let parent = document.createElement(`div`);\n    for (let ind = 1; ind <= 10; ind += 1) {\n      // use a map on currentRolls with roll1\n      let dropObj = this.roll1();\n      let imageDiv = document.createElement(`div`);\n      imageDiv.setAttribute(`class`, `${dropObj.category} itemDisplay`);\n      let dropImage = document.createElement(`img`);\n      dropImage.setAttribute(`src`, `${dropObj.drop.assetPath}`);\n      dropImage.setAttribute(`class`, `${dropObj.category}`);\n      imageDiv.appendChild(dropImage);\n      parent.appendChild(imageDiv);\n    }\n    this.currentRolls = parent;\n    let domParent = document.querySelector(`.parent2`);\n    domParent.replaceChildren(...parent.childNodes);\n    pityCounter.innerText = `Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`;\n  }\n  checkPity(drop, category){\n    //need to override for weapon and transcendant banners\n    if(drop.rank === `A` && category !== `constructShard`){\n      this.currentFiveStarPity = 0;\n    }\n    else if(drop.rank === `S` && category !== `constructShard`){\n      this.currentFiveStarPity = 0;\n      this.currentSixStarPity = 0;\n    }\n    if(this.currentFiveStarPity > this.fiveStarPity || this.currentSixStarPity > this.sixStarPity){\n      alert(`Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.`);\n    }\n  }\n  roll1() {\n    let drop;\n    let category;\n    this.currentFiveStarPity++;\n    this.currentSixStarPity++;\n    //need six star pity check first\n    //otherwise, can trigger edge case of hitting 5 star pity at 60, giving A construct instead of S construct\n    if(this.currentSixStarPity === this.sixStarPity){\n      //drop = database.pickOneFromCategory(this.sixStarPityType);\n      console.log(`six star pity reached`);\n      drop = this.pickPity(this.sixStarPityType);\n      category = this.sixStarPityType;\n    }\n    else if(this.currentFiveStarPity === this.fiveStarPity){\n      //drop = database.pickOneFromCategory(this.fiveStarPityType);\n      console.log(`five star pity reached`);\n      drop = this.pickPity(this.fiveStarPityType);\n      category = this.fiveStarPityType;\n    }\n    else{\n      //in case our nonpity drop gave us a lucky early jackpot, we need to apply rate up as well\n      category = chance.weighted(\n        dropTables[this.bannerType].items,\n        dropTables[this.bannerType].rates\n      );\n      if(category === this.pityCategory || category === `bOrAConstruct`){\n        console.log(`Got lucky ${category} drop of rate up category, check rate up success`);\n        drop = this.pickPity(category);\n      }\n      else if(category === this.fiveStarPityType || category === this.sixStarPityType){\n        console.log(`Got lucky ${category} drop not of rate up category, pick random`);\n        drop = this.pickPity(category);\n      }\n      else{\n        drop = database.pickOneFromCategory(category);\n      }\n    }\n    this.checkPity(drop, category);\n    return { drop, category };\n  }\n  isSuccessRateUp(){\n    //weapon banner must override to deal with different rates\n    let random = chance.natural({max: 100});\n    return random <= this.rateUpPercent;\n  }\n  pickPityDrop(){\n    //weapon banner must override to deal with offrates\n  }\n  pickPity(pityCategory) {\n    //don't do rate up calculations if it's not the same category. Prevents A selections from stifling S pity drops\n    if(pityCategory !== this.rateUpCategory && pityCategory !== `bOrAConstruct`){\n      console.log(`${pityCategory} does not have rate up, skip`);\n      return database.pickOneFromCategory(pityCategory); \n    }\n    let getSelectedRateUp = this.isSuccessRateUp();\n    if(this.rateUpSelection !== `Select` && this.rateUpSelection && getSelectedRateUp){\n      //rate up is not a lie\n      console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`);\n      return database.pickSpecificDrop(this.rateUpSelection, pityCategory);\n    }\n    else if(this.rateUpSelection !== `Select` && this.rateUpSelection && !getSelectedRateUp){\n      //rate up is a lie\n      let drop = database.pickOneFromCategory(pityCategory);\n      while(drop.name === this.rateUpSelection){\n        drop = database.pickOneFromCategory(pityCategory);\n      }\n      console.log(`Rateup ❌, picking ${drop.name} instead of ${this.rateUpSelection}`);\n      return drop;\n    }\n    else{\n      //no rate up\n      console.log(`No rate up, pick something random`);\n      return database.pickOneFromCategory(pityCategory);\n    }\n  }\n\n  clearStats() {\n    this.currentSixStarPity = 0;\n    this.currentFiveStarPity = 0;\n  }\n\n  changeRateUpSelection(selection) {}\n}\n\nclass ConstructBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}\n\nclass WeaponBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}\n\nclass TranscendantBanner extends Banner{\n  constructor(bannerType){\n    super(bannerType);\n  }\n}","import {dropTables} from \"./data.js\";\nimport { BOrAConstructSelector, ConstructShardSelector, ConstructSelector, WeaponSelector, ItemSelector } from \"./DropSelector.js\";\nclass ItemDatabase {\n  lookupTable;\n  constructor() {\n    this.generateLookupTable();\n  }\n  categoryToClass(category){\n    switch(category){\n      case `bOrAConstruct`:\n        return BOrAConstructSelector;\n      case `constructShard`:\n        return ConstructShardSelector;\n      case `bConstruct`:\n      case `aConstruct`:\n      case `sConstruct`:\n      case `transcendant`:\n        return ConstructSelector;\n      case `sixStarWeapon`:\n      case `fiveStarWeapon`:\n      case `fourStarWeapon`:\n      case `threeStarWeapon`:\n      case `twoStarWeapon`:\n        return WeaponSelector;\n      case `cogs`:\n      case `exp`:\n      case `overclock`:\n      case `fourStarEquipment`:\n        return ItemSelector;\n      default:\n        console.log(\n          `categoryToClass: ${category} is not a valid category. Please create an issue.`\n        );\n        break;\n    }\n  }\n  generateLookupTable(){\n    this.lookupTable = {};\n    for(const banner in dropTables){\n      (dropTables[banner].items).forEach(\n        category => {\n          if(!(category in this.lookupTable)){\n            this.lookupTable[`${category}`] = new (this.categoryToClass(category))(category);\n          }\n        }\n      );\n    }\n  }\n  pickOneFromCategory(category) {\n    try{\n      return this.lookupTable[category].pickOneFromCategory();\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n  pickSpecificDrop(selection, category) {\n    try{\n      return this.lookupTable[category].pickSpecificDrop(selection);\n    } catch(err){\n      console.log(category, err);\n    }\n  }\n}\n\nexport const database = new ItemDatabase();","import {unitData, itemData, weaponData} from \"./data.js\";\nclass BaseSelector{\n  dataTable;\n  category;\n\n  //baseSelector is for constructs. Weapon banner needs to override as needed\n  constructor(category){\n    this.category = category;\n  }\n  generateCustomList(){\n    //don't call from constructor unless it's needed\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.dataTable[this.category];\n  }\n  packReturnObject(drop){\n    return { name: drop.name, assetPath: `${this.dataTable.assetPath}${drop.name}.png`, rank: drop.rank };\n  }\n  pick(){\n    return chance.pickone(this.getReferenceTable());\n  }\n  pickOneFromCategory(){\n    let drop = this.pick();\n    return this.packReturnObject(drop);\n  }\n  pickSpecificDrop(selection){\n    let drop = this.getReferenceTable().find(obj => obj.frame === selection);\n    return this.packReturnObject(drop);\n  }\n}\n\nexport class ConstructSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = unitData;\n  }\n  packReturnObject(drop){\n    return { name: drop.frame, assetPath: `${this.dataTable.assetPath}${drop.frame}.png`, rank: drop.rank };\n  }\n}\n\nexport class BOrAConstructSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class ConstructShardSelector extends ConstructSelector{\n  list;\n  constructor(category){\n    super(category);\n    this.generateCustomList();\n  }\n  generateCustomList(){\n    this.list = [];\n    this.list.push(...(unitData.bConstruct), ...(unitData.aConstruct), ...(unitData.sConstruct));\n  }\n  getReferenceTable(){\n    //some banners need to override this to return its own custom array\n    return this.list;\n  }\n}\n\nexport class WeaponSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = weaponData;\n  }\n  packReturnObject(drop){\n    return { name: drop.name, assetPath: `${this.dataTable.assetPath}${drop.name}.png` };\n  }\n}\n\nexport class ItemSelector extends BaseSelector{\n  constructor(category){\n    super(category);\n    this.dataTable = itemData;\n  }\n  packReturnObject(drop){\n    return { name: drop, assetPath: `${this.dataTable.assetPath}${drop}.png` };\n  }\n}\n"],"names":["$7x8Nx","parcelRequire","$828131a16b3c365e$export$3b4e64e77073e307","bannerType","sixStarPity","currentSixStarPity","sixStarPityType","fiveStarPity","currentFiveStarPity","fiveStarPityType","rateUpPercent","rateUpSelection","rateUpCategory","currentRolls","constructor","this","parseData","$3ESMo","bannerData","rateUpChance","roll10","parent","document","createElement","ind","dropObj","roll1","imageDiv","setAttribute","category","dropImage","drop","assetPath","appendChild","querySelector","replaceChildren","childNodes","pityCounter","innerText","checkPity","rank","alert","console","log","pickPity","chance","weighted","dropTables","items","rates","pityCategory","database","pickOneFromCategory","isSuccessRateUp","natural","max","pickPityDrop","getSelectedRateUp","pickSpecificDrop","name","clearStats","changeRateUpSelection","selection","$57c27093f03009f4$export$a62f5db2b03ceea3","lookupTable","generateLookupTable","categoryToClass","$290LY","BOrAConstructSelector","ConstructShardSelector","ConstructSelector","WeaponSelector","ItemSelector","banner","forEach","err","$18fd0582bd06dd25$var$BaseSelector","dataTable","generateCustomList","getReferenceTable","packReturnObject","pick","pickone","find","obj","frame","$18fd0582bd06dd25$export$70e7f81334bb0cf","super","unitData","$18fd0582bd06dd25$export$bb5c549a3bd1e962","list","push","bConstruct","aConstruct","$18fd0582bd06dd25$export$7f296522a910d543","sConstruct","$18fd0582bd06dd25$export$a259bacf402cc988","weaponData","$18fd0582bd06dd25$export$cd303fea6ed83a4","itemData"],"version":3,"file":"index.afdec358.js.map"}