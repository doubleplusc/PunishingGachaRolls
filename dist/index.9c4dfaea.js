function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},i=t.parcelRequire7423;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire7423=i),i.register("bcFK1",(function(t,r){e(t.exports,"ConstructBanner",(()=>c)),e(t.exports,"WeaponBanner",(()=>o)),e(t.exports,"TranscendantBanner",(()=>p));var a=i("7x8Nx"),s=i("3ESMo");class n{bannerType;sixStarPity;currentSixStarPity;sixStarPityType;fiveStarPity;currentFiveStarPity;fiveStarPityType;rateUpPercent;rateUpSelection;rateUpCategory;currentRolls;constructor(e){this.bannerType=e,this.currentFiveStarPity=0,this.currentSixStarPity=0,this.rateUpPercent=70,this.rateUpCategory="",this.parseData()}parseData(){this.rateUpPercent=s.bannerData[this.bannerType].rateUpChance,this.rateUpCategory=s.bannerData[this.bannerType].rateUpCategory,this.sixStarPity=s.bannerData[this.bannerType].sixStarPity,this.fiveStarPity=s.bannerData[this.bannerType].fiveStarPity,this.fiveStarPityType=s.bannerData[this.bannerType].fiveStarPityType,this.sixStarPityType=s.bannerData[this.bannerType].sixStarPityType}roll10(){let e=document.createElement("div");for(let t=1;t<=10;t+=1){let t=this.roll1(),r=document.createElement("div");r.setAttribute("class",`${t.category} itemDisplay`);let a=document.createElement("img");a.setAttribute("src",`${t.drop.assetPath}`),a.setAttribute("class",`${t.category}`),r.appendChild(a),e.appendChild(r)}this.currentRolls=e,document.querySelector(".parent2").replaceChildren(...e.childNodes),pityCounter.innerText=`Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`}checkPity(e,t){"A"===e.rank&&"constructShard"!==t?this.currentFiveStarPity=0:"S"===e.rank&&"constructShard"!==t&&(this.currentFiveStarPity=0,this.currentSixStarPity=0),(this.currentFiveStarPity>this.fiveStarPity||this.currentSixStarPity>this.sixStarPity)&&alert("Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.")}roll1(){let e,t;return this.currentFiveStarPity++,this.currentSixStarPity++,this.currentSixStarPity===this.sixStarPity?(console.log("six star pity reached"),e=this.pickPity(this.sixStarPityType),t=this.sixStarPityType):this.currentFiveStarPity===this.fiveStarPity?(console.log("five star pity reached"),e=this.pickPity(this.fiveStarPityType),t=this.fiveStarPityType):(t=chance.weighted(s.dropTables[this.bannerType].items,s.dropTables[this.bannerType].rates),t===this.pityCategory||"bOrAConstruct"===t?(console.log(`Got lucky ${t} drop of rate up category, check rate up success`),e=this.pickPity(t)):t===this.fiveStarPityType||t===this.sixStarPityType?(console.log(`Got lucky ${t} drop not of rate up category, pick random`),e=this.pickPity(t)):e=a.database.pickOneFromCategory(t)),this.checkPity(e,t),{drop:e,category:t}}isSuccessRateUp(){return chance.natural({max:100})<=this.rateUpPercent}pickPityDrop(e){return a.database.pickOneFromCategory(e)}pickPity(e){if(e!==this.rateUpCategory&&"bOrAConstruct"!==e)return console.log(`${e} does not have rate up, skip`),a.database.pickOneFromCategory(e);let t=this.isSuccessRateUp();if("Select"!==this.rateUpSelection&&this.rateUpSelection&&t)return console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`),a.database.pickSpecificDrop(this.rateUpSelection,e);if("Select"!==this.rateUpSelection&&this.rateUpSelection&&!t){let t=this.pickPityDrop(e);for(;t.name===this.rateUpSelection;)t=this.pickPityDrop(e);return console.log(`Rateup ❌, picking ${t.name} instead of ${this.rateUpSelection}`),t}return console.log("No rate up, pick something random"),a.database.pickOneFromCategory(e)}clearStats(){this.currentSixStarPity=0,this.currentFiveStarPity=0}changeRateUpSelection({target:{value:e}}){let t=document.getElementById("select-target-image");this.rateUpSelection=e,"Select"!==e?(t.setAttribute("src",`${a.database.pickSpecificDrop(e,this.rateUpCategory).assetPath}`),t.style.opacity=100):(t.setAttribute("src",""),t.style.opacity=0)}switchIn(){const e=document.getElementById("select-target");this.targetSelectListener=this.changeRateUpSelection.bind(this),e.addEventListener("change",this.targetSelectListener),pityCounter.innerText=`Pity: ${this.currentFiveStarPity} / ${this.currentSixStarPity}`,this.populateBannerTargetSelect()}switchOut(){document.getElementById("select-banner");document.getElementById("select-target").removeEventListener("change",this.targetSelectListener)}populateBannerTargetSelect(){let e=[],t=document.createElement("option");if(t.text="Select",e.push(t.outerHTML),this.rateUpCategory)for(const r of a.database.getReferenceTable(this.rateUpCategory))t.text=r.frame,t.value=r.frame,e.push(t.outerHTML);const r=document.getElementById("select-target");r.options.length=0,r.innerHTML=e.join("\n"),this.changeRateUpSelection({target:{value:r.value}})}}class c extends n{constructor(e){super(e)}}class o extends n{constructor(e){super(e)}pickPityDrop(e,t){return a.database.pickTargetedWeapon(this.rateUpSelection,e,t)}pickPity(e){let t=this.isSuccessRateUp();if("Select"!==this.rateUpSelection&&this.rateUpSelection&&t)return console.log(`Rateup ✅, picking rate up selection ${this.rateUpSelection}`),this.pickPityDrop(e,!0);if("Select"!==this.rateUpSelection&&this.rateUpSelection&&!t){let t=this.pickPityDrop(e,!1);for(;t.name===this.rateUpSelection;)t=this.pickPityDrop(e,!1);return console.log(`Rateup ❌, picking ${t.name} instead of ${this.rateUpSelection}`),t}return console.log("No rate up, pick something random"),a.database.pickOneFromCategory(e)}checkPity(e,t){"fiveStarWeapon"===t?this.currentFiveStarPity=0:"sixStarWeapon"===t&&(this.currentFiveStarPity=0,this.currentSixStarPity=0),(this.currentFiveStarPity>this.fiveStarPity||this.currentSixStarPity>this.sixStarPity)&&alert("Pity had a nuclear meltdown. Please take a screenshot of the page and create an issue.")}populateBannerTargetSelect(){let e=[],t=document.createElement("option");if(t.text="Select",e.push(t.outerHTML),this.rateUpCategory){console.log(this.rateUpCategory);for(const r in a.database.getReferenceTable(this.rateUpCategory))t.text=r,t.value=t.text,e.push(t.outerHTML)}const r=document.getElementById("select-target");r.options.length=0,r.innerHTML=e.join("\n"),this.changeRateUpSelection({target:{value:r.value}})}}class p extends n{constructor(e){super(e)}}})),i.register("7x8Nx",(function(t,r){e(t.exports,"database",(()=>n));var a=i("3ESMo"),s=i("290LY");const n=new class{lookupTable;constructor(){this.generateLookupTable()}categoryToClass(e){switch(e){case"bOrAConstruct":return s.BOrAConstructSelector;case"constructShard":return s.ConstructShardSelector;case"bConstruct":case"aConstruct":case"sConstruct":case"transcendant":return s.ConstructSelector;case"sixStarWeapon":case"fiveStarWeapon":case"fourStarWeapon":case"threeStarWeapon":case"twoStarWeapon":return s.WeaponSelector;case"cogs":case"exp":case"overclock":case"fourStarEquipment":return s.ItemSelector;default:console.log(`categoryToClass: ${e} is not a valid category. Please create an issue.`)}}generateLookupTable(){this.lookupTable={};for(const e in a.dropTables)a.dropTables[e].items.forEach((e=>{e in this.lookupTable||(this.lookupTable[`${e}`]=new(this.categoryToClass(e))(e))}))}pickOneFromCategory(e){try{return this.lookupTable[e].pickOneFromCategory()}catch(t){console.log(e,t)}}pickSpecificDrop(e,t,r=!0){try{return this.lookupTable[t].pickSpecificDrop(e,t,r)}catch(e){console.log(t,e)}}getReferenceTable(e){return this.lookupTable[e].getReferenceTable()}pickTargetedWeapon(e,t,r){return this.lookupTable[t].pickSpecificDrop(e,t,r)}}})),i.register("290LY",(function(t,r){e(t.exports,"ConstructSelector",(()=>n)),e(t.exports,"BOrAConstructSelector",(()=>c)),e(t.exports,"ConstructShardSelector",(()=>o)),e(t.exports,"WeaponSelector",(()=>p)),e(t.exports,"ItemSelector",(()=>l));var a=i("3ESMo");class s{dataTable;category;constructor(e){this.category=e}generateCustomList(){}getReferenceTable(e=this.category){return this.dataTable[e]}packReturnObject(e){return{name:e.name,assetPath:`${this.dataTable.assetPath}${e.name}.png`,rank:e.rank}}pick(){return chance.pickone(this.getReferenceTable())}pickOneFromCategory(){let e=this.pick();return this.packReturnObject(e)}pickSpecificDrop(e,t,r){let a=this.getReferenceTable().find((t=>t.frame===e));return this.packReturnObject(a)}}class n extends s{constructor(e){super(e),this.dataTable=a.unitData}packReturnObject(e){return{name:e.frame,assetPath:`${this.dataTable.assetPath}${e.frame}.png`,rank:e.rank}}}class c extends n{list;constructor(e){super(e),this.generateCustomList()}generateCustomList(){this.list=[],this.list.push(...a.unitData.bConstruct,...a.unitData.aConstruct)}getReferenceTable(){return this.list}}class o extends n{list;constructor(e){super(e),this.generateCustomList()}generateCustomList(){this.list=[],this.list.push(...a.unitData.bConstruct,...a.unitData.aConstruct,...a.unitData.sConstruct)}getReferenceTable(){return this.list}}class p extends s{constructor(e){super(e),this.dataTable=a.weaponData}packReturnObject(e){return"sixStarWeapon"===this.category&&(e=this.getReferenceTable()[e][0]),{name:e,assetPath:`${this.dataTable.assetPath}${e}.png`}}pickSpecificDrop(e,t,r){let a=this.getReferenceTable("sixStarWeapon")[e];return r||(a=this.getReferenceTable("sixStarWeapon")[e][chance.integer({min:1,max:2})],a=this.getReferenceTable("sixStarWeapon")[a]),a="fiveStarWeapon"===t?a[3]:a[0],{name:a,assetPath:`${this.dataTable.assetPath}${a}.png`}}pick(){return"sixStarWeapon"===this.category?chance.pickone(Object.keys(this.getReferenceTable())):super.pick()}}class l extends s{constructor(e){super(e),this.dataTable=a.itemData}packReturnObject(e){return{name:e,assetPath:`${this.dataTable.assetPath}${e}.png`}}}})),i("bcFK1");
//# sourceMappingURL=index.9c4dfaea.js.map
